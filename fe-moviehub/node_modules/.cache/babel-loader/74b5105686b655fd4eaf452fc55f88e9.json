{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adnak\\\\Downloads\\\\NWT-projekat\\\\fe-moviehub\\\\src\\\\Users\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Select from '@mui/material/Select';\nimport Paper from '@material-ui/core/Paper';\nimport SearchBar from 'material-ui-search-bar';\nimport SettingsAccessibilityIcon from '@mui/icons-material/SettingsAccessibility';\nimport TextField from '@mui/material/TextField';\nimport Button from '@material-ui/core/Button';\nimport MenuItem from '@mui/material/MenuItem';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport Modal from '@material-ui/core/Modal';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Container from '@mui/material/Container';\nimport { getAllUsers } from 'Api/User/admin';\nimport { updateUser } from 'Api/User/admin';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650\n  }\n});\nexport default function Users() {\n  _s();\n\n  const [temprow, setTemprow] = useState();\n  const [rows, setRows] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [searched, setSearched] = useState('');\n  const classes = useStyles();\n  const [permission, setPermission] = useState('');\n  const [open, setOpen] = useState(false);\n\n  const getRole = role => {\n    if (role === 'ROLE_USER') return 'User';\n    return 'Admin';\n  };\n\n  const handleOpen = row => {\n    setTemprow(row);\n    setPermission(row.role);\n    setOpen(true);\n  };\n\n  const handleClose = () => setOpen(false);\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const response = await getAllUsers();\n        const data = response.filter(row => row.role !== 'ROLE_ADMIN');\n        setUsers(data);\n        setRows(data);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n\n    fetchData();\n  }, []);\n\n  const requestSearch = searchedVal => {\n    const filteredRows = users.filter(row => {\n      return row.username.toLowerCase().includes(searchedVal.toLowerCase());\n    });\n    setRows(filteredRows);\n  };\n\n  const cancelSearch = () => {\n    setSearched('');\n    requestSearch(searched);\n  };\n\n  let inputStyle = {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: '2px solid white'\n  };\n\n  const handlePermissionChange = event => {\n    setPermission(event.target.value);\n  };\n\n  const onFinish = async (values, temprow) => {\n    try {\n      temprow.role = values;\n      await updateUser(temprow);\n      handleClose();\n    } catch (error) {\n      handleClose();\n      console.log(error);\n    }\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    onFinish(permission, temprow);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      style: {\n        marginTop: '35px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n        value: searched,\n        onChange: searchVal => requestSearch(searchVal),\n        onCancelSearch: () => cancelSearch()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          className: classes.table,\n          \"aria-label\": \"simple table\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Role\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: rows.map(row => /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"th\",\n                scope: \"row\",\n                children: row.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: row.firstName + ' ' + row.lastName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: getRole(row === null || row === void 0 ? void 0 : row.role)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: /*#__PURE__*/_jsxDEV(SettingsAccessibilityIcon, {\n                  onClick: () => handleOpen(row)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 19\n              }, this)]\n            }, row.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        style: {\n          marginTop: '40px'\n        },\n        open: open,\n        onClose: handleClose,\n        \"aria-labelledby\": \"modal-modal-title\",\n        \"aria-describedby\": \"modal-modal-description\",\n        disableEscapeKeyDown: true,\n        disableEnforceFocus: true,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: inputStyle,\n          children: /*#__PURE__*/_jsxDEV(Container, {\n            component: \"main\",\n            maxWidth: \"md\",\n            children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                borderRadius: '5px',\n                backgroundColor: '#FFFAFA',\n                opacity: 0.9,\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                padding: '25px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                onSubmit: handleSubmit,\n                component: \"form\",\n                noValidate: true,\n                sx: {\n                  mt: 3\n                },\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  marginBottom: \"10px\",\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      disabled: true,\n                      name: \"firstName\",\n                      required: true,\n                      fullWidth: true,\n                      id: \"firstName\",\n                      label: \"First Name\",\n                      value: temprow === null || temprow === void 0 ? void 0 : temprow.contactInfo.firstName,\n                      autoFocus: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      disabled: true,\n                      required: true,\n                      fullWidth: true,\n                      id: \"lastName\",\n                      label: \"Last Name\",\n                      name: \"lastName\",\n                      value: temprow === null || temprow === void 0 ? void 0 : temprow.contactInfo.lastName,\n                      autoFocus: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 197,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      disabled: true,\n                      required: true,\n                      fullWidth: true,\n                      id: \"email\",\n                      label: \"Email Address\",\n                      value: temprow === null || temprow === void 0 ? void 0 : temprow.contactInfo.email,\n                      name: \"email\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      disabled: true,\n                      required: true,\n                      fullWidth: true,\n                      name: \"username\",\n                      label: \"Username\",\n                      type: \"username\",\n                      id: \"username\",\n                      value: temprow === null || temprow === void 0 ? void 0 : temprow.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                      id: \"demo-simple-select-helper-label\",\n                      children: \"Role\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Select, {\n                      labelId: \"demo-simple-select-helper-label\",\n                      id: \"demo-simple-select-helper\",\n                      name: \"dropdown\",\n                      fullWidth: true,\n                      value: permission,\n                      label: \"role\",\n                      onChange: handlePermissionChange,\n                      children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                        value: \"\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 244,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                        value: 'ROLE_ADMIN',\n                        children: \"Admin\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 245,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                        value: 'ROLE_USER',\n                        children: \"User\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 246,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  variant: \"contained\",\n                  style: {\n                    marginTop: '5%',\n                    backgroundColor: '#3949AB',\n                    marginLeft: '30%',\n                    width: '40%',\n                    color: '#ffff',\n                    borderRadius: '10'\n                  },\n                  sx: {\n                    mt: 3,\n                    mb: 2\n                  },\n                  children: \"Save Changes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: handleClose,\n                  variant: \"contained\",\n                  style: {\n                    marginTop: '2%',\n                    backgroundColor: '#3949AB',\n                    marginLeft: '30%',\n                    width: '40%',\n                    color: '#ffff',\n                    borderRadius: '10'\n                  },\n                  sx: {\n                    mt: 3,\n                    mb: 2\n                  },\n                  children: \"Close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Users, \"wTCQEGVF2rCjqhYqPlnON/byD2Y=\", false, function () {\n  return [useStyles];\n});\n\n_c = Users;\n\nvar _c;\n\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"sources":["C:/Users/adnak/Downloads/NWT-projekat/fe-moviehub/src/Users/index.js"],"names":["React","useEffect","useState","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Select","Paper","SearchBar","SettingsAccessibilityIcon","TextField","Button","MenuItem","Box","Grid","Modal","CssBaseline","InputLabel","Container","getAllUsers","updateUser","useStyles","table","minWidth","Users","temprow","setTemprow","rows","setRows","users","setUsers","searched","setSearched","classes","permission","setPermission","open","setOpen","getRole","role","handleOpen","row","handleClose","fetchData","response","data","filter","e","console","error","requestSearch","searchedVal","filteredRows","username","toLowerCase","includes","cancelSearch","inputStyle","display","flexDirection","alignItems","borderRadius","handlePermissionChange","event","target","value","onFinish","values","log","handleSubmit","preventDefault","marginTop","searchVal","map","firstName","lastName","id","backgroundColor","opacity","padding","mt","contactInfo","email","marginLeft","width","color","mb"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Select from '@mui/material/Select'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport SearchBar from 'material-ui-search-bar'\r\nimport SettingsAccessibilityIcon from '@mui/icons-material/SettingsAccessibility'\r\nimport TextField from '@mui/material/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport MenuItem from '@mui/material/MenuItem'\r\nimport Box from '@material-ui/core/Box'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport CssBaseline from '@mui/material/CssBaseline'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport Container from '@mui/material/Container'\r\nimport { getAllUsers } from 'Api/User/admin'\r\nimport { updateUser } from 'Api/User/admin'\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n})\r\n\r\nexport default function Users() {\r\n  const [temprow, setTemprow] = useState()\r\n  const [rows, setRows] = useState([])\r\n  const [users, setUsers] = useState([])\r\n  const [searched, setSearched] = useState('')\r\n  const classes = useStyles()\r\n  const [permission, setPermission] = useState('')\r\n\r\n  const [open, setOpen] = useState(false)\r\n\r\n  const getRole = (role) => {\r\n    if (role === 'ROLE_USER') return 'User'\r\n    return 'Admin'\r\n  }\r\n\r\n  const handleOpen = (row) => {\r\n    setTemprow(row)\r\n    setPermission(row.role)\r\n    setOpen(true)\r\n  }\r\n\r\n  const handleClose = () => setOpen(false)\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const response = await getAllUsers()\r\n        const data = response.filter((row) => row.role !== 'ROLE_ADMIN')\r\n        setUsers(data)\r\n        setRows(data)\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    }\r\n    fetchData()\r\n  }, [])\r\n\r\n  const requestSearch = (searchedVal) => {\r\n    const filteredRows = users.filter((row) => {\r\n      return row.username.toLowerCase().includes(searchedVal.toLowerCase())\r\n    })\r\n    setRows(filteredRows)\r\n  }\r\n\r\n  const cancelSearch = () => {\r\n    setSearched('')\r\n    requestSearch(searched)\r\n  }\r\n\r\n  let inputStyle = {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    borderRadius: '2px solid white',\r\n  }\r\n\r\n  const handlePermissionChange = (event) => {\r\n    setPermission(event.target.value)\r\n  }\r\n\r\n  const onFinish = async (values, temprow) => {\r\n    try {\r\n      temprow.role = values\r\n\r\n      await updateUser(temprow)\r\n      handleClose()\r\n    } catch (error) {\r\n      handleClose()\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault()\r\n\r\n    onFinish(permission, temprow)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Paper style={{ marginTop: '35px' }}>\r\n        <SearchBar\r\n          value={searched}\r\n          onChange={(searchVal) => requestSearch(searchVal)}\r\n          onCancelSearch={() => cancelSearch()}\r\n        />\r\n        <TableContainer>\r\n          <Table className={classes.table} aria-label='simple table'>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Username</TableCell>\r\n                <TableCell align='right'>Name</TableCell>\r\n                <TableCell align='right'>Role</TableCell>\r\n                <TableCell align='right'>Email</TableCell>\r\n                <TableCell align='right'>Details</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {rows.map((row) => (\r\n                <TableRow key={row.id}>\r\n                  <TableCell component='th' scope='row'>\r\n                    {row.username}\r\n                  </TableCell>\r\n                  <TableCell align='right'>\r\n                    {row.firstName +\r\n                      ' ' +\r\n                      row.lastName}\r\n                  </TableCell>\r\n                  <TableCell align='right'>{getRole(row?.role)}</TableCell>\r\n                  <TableCell align='right'>\r\n                    <SettingsAccessibilityIcon\r\n                      onClick={() => handleOpen(row)}\r\n                    ></SettingsAccessibilityIcon>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n      <div>\r\n        <Modal\r\n          style={{\r\n            marginTop: '40px',\r\n          }}\r\n          open={open}\r\n          onClose={handleClose}\r\n          aria-labelledby='modal-modal-title'\r\n          aria-describedby='modal-modal-description'\r\n          disableEscapeKeyDown\r\n          disableEnforceFocus\r\n        >\r\n          <div style={inputStyle}>\r\n            <Container component='main' maxWidth='md'>\r\n              <CssBaseline />\r\n              <Box\r\n                sx={{\r\n                  borderRadius: '5px',\r\n                  backgroundColor: '#FFFAFA',\r\n                  opacity: 0.9,\r\n                  display: 'flex',\r\n                  flexDirection: 'column',\r\n                  alignItems: 'center',\r\n                  padding: '25px',\r\n                }}\r\n              >\r\n                <Box\r\n                  onSubmit={handleSubmit}\r\n                  component='form'\r\n                  noValidate\r\n                  sx={{ mt: 3 }}\r\n                >\r\n                  <Grid container spacing={2} marginBottom='10px'>\r\n                    <Grid item xs={12} sm={6}>\r\n                      <TextField\r\n                        disabled={true}\r\n                        name='firstName'\r\n                        required\r\n                        fullWidth\r\n                        id='firstName'\r\n                        label='First Name'\r\n                        value={temprow?.contactInfo.firstName}\r\n                        autoFocus\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                      <TextField\r\n                        disabled={true}\r\n                        required\r\n                        fullWidth\r\n                        id='lastName'\r\n                        label='Last Name'\r\n                        name='lastName'\r\n                        value={temprow?.contactInfo.lastName}\r\n                        autoFocus\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                      <TextField\r\n                        disabled={true}\r\n                        required\r\n                        fullWidth\r\n                        id='email'\r\n                        label='Email Address'\r\n                        value={temprow?.contactInfo.email}\r\n                        name='email'\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                      <TextField\r\n                        disabled={true}\r\n                        required\r\n                        fullWidth\r\n                        name='username'\r\n                        label='Username'\r\n                        type='username'\r\n                        id='username'\r\n                        value={temprow?.username}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                      <InputLabel id='demo-simple-select-helper-label'>\r\n                        Role\r\n                      </InputLabel>\r\n                      <Select\r\n                        labelId='demo-simple-select-helper-label'\r\n                        id='demo-simple-select-helper'\r\n                        name='dropdown'\r\n                        fullWidth\r\n                        value={permission}\r\n                        label='role'\r\n                        onChange={handlePermissionChange}\r\n                      >\r\n                        <MenuItem value=''></MenuItem>\r\n                        <MenuItem value={'ROLE_ADMIN'}>Admin</MenuItem>\r\n                        <MenuItem value={'ROLE_USER'}>User</MenuItem>\r\n                      </Select>\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Button\r\n                    type='submit'\r\n                    variant='contained'\r\n                    style={{\r\n                      marginTop: '5%',\r\n                      backgroundColor: '#3949AB',\r\n                      marginLeft: '30%',\r\n                      width: '40%',\r\n                      color: '#ffff',\r\n                      borderRadius: '10',\r\n                    }}\r\n                    sx={{ mt: 3, mb: 2 }}\r\n                  >\r\n                    Save Changes\r\n                  </Button>\r\n                  <Button\r\n                    onClick={handleClose}\r\n                    variant='contained'\r\n                    style={{\r\n                      marginTop: '2%',\r\n                      backgroundColor: '#3949AB',\r\n                      marginLeft: '30%',\r\n                      width: '40%',\r\n                      color: '#ffff',\r\n                      borderRadius: '10',\r\n                    }}\r\n                    sx={{ mt: 3, mb: 2 }}\r\n                  >\r\n                    Close\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Container>\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}